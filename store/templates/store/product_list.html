{% extends "_base.html" %}

{% block title %}Products | Opera Home{% endblock %}

{% block content %}
<section class="page-hero">
  <div class="hero-left">
    <span class="hero-pill">Opera Home · Signature collection</span>
    <h1 class="page-title">Design-led pieces for a calm, modern home</h1>
    <p class="page-subtitle">
      Build a space that feels like a boutique hotel, not a crowded showroom.
      Every piece in Opera Home is chosen for warm tones, soft textures and
      simple lines that stay beautiful for years.
    </p>
  </div>

  <form method="get" class="search-form hero-search">
    <input
      type="text"
      name="q"
      placeholder="Search sofas, tables, lamps, vases..."
      value="{{ search_query }}"
    >
    {% if current_category %}
      <input type="hidden" name="category" value="{{ current_category }}">
    {% endif %}
    <button type="submit" class="btn-primary">Search the collection</button>
  </form>
</section>

<!-- highlight strip -->
<section class="container section section--strip">
  <div class="info-grid">
    <article class="info-card">
      <h3>Designed to mix & match</h3>
      <p>Neutral palettes and simple lines so new pieces blend with what you already own.</p>
    </article>
    <article class="info-card">
      <h3>Made for real homes</h3>
      <p>Durable finishes, easy-care fabrics and proportions that work in city apartments.</p>
    </article>
    <article class="info-card">
      <h3>Ready for your next chapter</h3>
      <p>Start with a few statement pieces now and grow the collection room by room.</p>
    </article>
  </div>
</section>

<section class="layout layout--products">
  <!-- sidebar -->
  <aside class="sidebar">
    <h2 class="sidebar-title">Browse by mood & room</h2>
    <ul class="category-list">
      <li>
        <a href="{% url 'store:products_list' %}"
           class="{% if not current_category %}is-active{% endif %}">
          All pieces
        </a>
      </li>
      {% for category in categories %}
        <li>
          <a href="?category={{ category.slug }}{% if search_query %}&q={{ search_query }}{% endif %}"
             class="{% if current_category == category.slug %}is-active{% endif %}">
            {{ category.name }}
          </a>
        </li>
      {% endfor %}
    </ul>

    <div class="sidebar-card">
      <h3>Need a starting point?</h3>
      <p>Begin with one hero item – a sofa, table or lamp – then layer decor around it.</p>
      {% if user.is_staff %}
        <a href="{% url 'store:products_create' %}" class="btn-secondary btn-block">
          Add a hero product
        </a>
      {% endif %}
    </div>
  </aside>

  <!-- main content -->
  <div class="content">
    {% if products %}
      <div class="products-grid">
        {% for product in products %}
          <article class="product-card">
            <a href="{% url 'store:products_detail' product.pk %}">
              <div class="product-image-wrapper">
                {% if product.image %}
                  <img src="{{ product.image.url }}" alt="{{ product.name }}">
                {% else %}
                  <div class="product-placeholder">
                    <span>Image coming soon</span>
                  </div>
                {% endif %}
              </div>
              <div class="product-body">
                <h3 class="product-name">{{ product.name }}</h3>
                <p class="product-category">{{ product.category.name }}</p>
                <p class="product-price">
                  {{ product.price }} <span class="currency">TL</span>
                </p>
              </div>
            </a>
            <div class="product-actions">
              <button type="button" class="btn-secondary">Add to cart</button>
            </div>
          </article>
        {% endfor %}
      </div>

      {% if is_paginated %}
        <nav class="pagination">
          {% if page_obj.has_previous %}
            <a href="?page={{ page_obj.previous_page_number }}{% if current_category %}&category={{ current_category }}{% endif %}{% if search_query %}&q={{ search_query }}{% endif %}"
               class="page-link">Previous</a>
          {% endif %}

          <span class="page-info">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
          </span>

          {% if page_obj.has_next %}
            <a href="?page={{ page_obj.next_page_number }}{% if current_category %}&category={{ current_category }}{% endif %}{% if search_query %}&q={{ search_query }}{% endif %}"
               class="page-link">Next</a>
          {% endif %}
        </nav>
      {% endif %}
    {% else %}
      <div class="empty-layout">
        <div class="empty-state-card">
          <h2>Start your first Opera Home collection</h2>
          <p>
            The stage is set – layout, navigation and categories are already in place.
            Once you add products, this becomes a calm, curated showroom for your brand.
          </p>
          <ul>
            <li>Add 3–5 hero pieces first: a sofa, a table, a lamp, a statement decor object.</li>
            <li>Use clear, short names and one strong photo for each product.</li>
            <li>Group items into Living Room, Bedroom, Lighting and Decor collections.</li>
          </ul>
          {% if user.is_staff %}
            <a href="{% url 'store:products_create' %}" class="btn-primary empty-cta">
              Add your first collection piece
            </a>
          {% endif %}
        </div>

        <div class="empty-side-card">
          <h3>What this page will become</h3>
          <p>
            A three-column product grid, category filters on the left and a clean,
            editorial-style layout that feels more like a lookbook than a traditional shop.
          </p>
          <p>
            As you add items, you can introduce badges like “New”, “Limited” or
            “Bestseller” and highlight full room sets for higher-value orders.
          </p>
        </div>
      </div>
    {% endif %}
  </div>
</section>

<section class="feature-section">
  <div class="feature-header">
    <h2>Design principles behind Opera Home</h2>
    <p>
      Every layout, product card and interaction is built to feel calm, premium and
      conversion-ready – especially on mobile.
    </p>
  </div>
  <div class="feature-grid">
    <article class="feature-card">
      <h3>Grid made for scrolling</h3>
      <p>
        Clean cards with plenty of white space keep the collection easy to scan on phones,
        while larger imagery shines on desktop.
      </p>
    </article>
    <article class="feature-card">
      <h3>From inspiration to checkout</h3>
      <p>
        Copy, categories and CTAs are written to guide visitors from “nice image” to
        “this would work in my living room” to “Add to cart”.
      </p>
    </article>
    <article class="feature-card">
      <h3>Ready for future filters</h3>
      <p>
        The structure already supports tags, price filters and room presets when you’re
        ready to expand the store.
      </p>
    </article>
  </div>
</section>
{% endblock %}
